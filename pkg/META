version = "0.1"
description = "Type-driven code generation"
ppx = "./ppx_deriving"

package "api" (
  version = "0.1"
  description = "Plugin API for ppx_deriving"
  requires = "dynlink compiler-libs.common ppx_tools.metaquot findlib"
  archive(byte) = "ppx_deriving.cma"
  archive(byte, plugin) = "ppx_deriving.cma"
  archive(native) = "ppx_deriving.cmxa"
  archive(native, plugin) = "ppx_deriving.cmxs"
  exists_if = "ppx_deriving.cma"
)

package "main" (
  version = "0.1"
  description = "Runner for ppx_deriving"
  requires = "ppx_deriving.api"
  archive(byte) = "ppx_deriving_main.cma"
  archive(byte, plugin) = "ppx_deriving_main.cma"
  archive(native) = "ppx_deriving_main.cmxa"
  archive(native, plugin) = "ppx_deriving_main.cmxs"
  exists_if = "ppx_deriving_main.cma"
)

package "show" (
  version = "0.1"
  description = "[@@deriving Show]"
  requires = "ppx_deriving.api"
  archive(byte) = "ppx_deriving_show.cma"
  archive(byte, plugin) = "ppx_deriving_show.cma"
  archive(native) = "ppx_deriving_show.cmxa"
  archive(native, plugin) = "ppx_deriving_show.cmxs"
  exists_if = "ppx_deriving_show.cma"
)

package "eq" (
  version = "0.1"
  description = "[@@deriving Eq]"
  requires = "ppx_deriving.api"
  archive(byte) = "ppx_deriving_eq.cma"
  archive(byte, plugin) = "ppx_deriving_eq.cma"
  archive(native) = "ppx_deriving_eq.cmxa"
  archive(native, plugin) = "ppx_deriving_eq.cmxs"
  exists_if = "ppx_deriving_eq.cma"
)

package "ord" (
  version = "0.1"
  description = "[@@deriving Ord]"
  requires = "ppx_deriving.api"
  archive(byte) = "ppx_deriving_ord.cma"
  archive(byte, plugin) = "ppx_deriving_ord.cma"
  archive(native) = "ppx_deriving_ord.cmxa"
  archive(native, plugin) = "ppx_deriving_ord.cmxs"
  exists_if = "ppx_deriving_ord.cma"
)
